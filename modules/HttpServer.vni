package vnx.addons;

module HttpServer implements HttpComponent {
	
	vnx.TopicPtr output_request;			// HttpRequest
	vnx.TopicPtr output_response;			// HttpResponse
	
	int port = 8080;
	
	bool use_epoll = false;					// if to use epoll() interface (might be buggy)
	
	bool non_blocking = true;				// if to send requests non-blocking (fail in case of overload)
	
	bool show_info = false;					// if to show access info
	
	bool show_warnings = false;				// if to show access failures
	
	bool auto_session = false;				// if to create sessions automatically
	
	int session_size = 3;					// number of 64-bit values for session ids
	
	long session_timeout = 86400;			// (timeout < zero) = infinite [sec]
	
	long max_payload_size = 16777216;		// -1 = unlimited [bytes]
	
	ulong chunk_size = 1048576;				// maximum chunk size for chunked transfer encoding [bytes]
	
	map<string, string> components;			// [url path => module name]
	
	string access_control_allow_origin = "*";		// "Access-Control-Allow-Origin" HTTP header
	
	string content_security_policy = "";			// "Content-Security-Policy" HTTP header
	
	string cookie_policy = "SameSite=Strict;";		// See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/
	
	string session_coookie_name = "hsid";
	
	string default_group = "observer";		// default permissions for anonymous clients
	
	vnx.access_level_e default_access = UNAUTHENTICATED;
	
	
	/* Possible GET/POST parameters:
	 * - user (user name)
	 * - passwd_hex (SHA256 hex string password)
	 * - passwd_plain (plaintext password)
	 * - redirect (redirect url)
	 */
	string login_path = "/login";
	
	string logout_path = "/logout";
	
}
